# PRD - 바리바리 (LLM 기반 여행 플래너)

## 1. 개요

**바리바리**는 LLM 채팅을 통해 여행 일정과 준비물을 자동 생성해주는 웹 앱이다. 카카오톡 스타일의 채팅 UI로 자연스럽게 대화하며 여행을 계획한다. 생성된 데이터는 서버(Supabase)에 저장되고, 모바일 확장 시 오프라인에서도 확인 가능하다.

## 2. 타겟 유저

- 여행 계획을 대화로 편하게 세우고 싶은 사람
- 해외여행 준비물을 빠뜨리고 싶지 않은 사람
- 복잡한 폼 입력 없이 "도쿄 3박 4일 맛집 위주" 한 마디로 일정 받고 싶은 사람

## 3. 유저 플로우

### 3.1 첫 방문
```
[웹 접속] → [로그인/회원가입] → [빈 채팅방 진입]
→ 바리바리 인사: "안녕하세요! 여행 계획을 도와드릴게요 ✈️
   어디로 여행을 계획하고 계신가요?"
```

### 3.2 일정 생성 플로우
```
유저: "도쿄 3박 4일 여행 가려고"
바리바리: "도쿄 좋죠! 몇 가지만 더 알려주세요 😊
  - 여행 날짜가 정해졌나요?
  - 선호하는 스타일이 있나요? (관광/맛집/쇼핑/휴양)"
유저: "4월 1일부터, 맛집이랑 관광 위주로"
바리바리: "예산은 대략 어느 정도 생각하세요? (없으면 패스해도 돼요)"
유저: "150만원 정도"
바리바리: "알겠어요! 일정 짜볼게요 🗓️"
→ [로딩 애니메이션 (말풍선 타이핑 인디케이터)]
→ [일정 카드 메시지로 표시]
바리바리: "이런 일정 어떠세요? 수정하고 싶은 부분 있으면 말씀해주세요!"
```

### 3.3 일정 수정 플로우
```
유저: "둘째 날 오전에 츠키지 시장 대신 시부야 가고 싶어"
바리바리: "수정했어요! Day 2 오전이 시부야로 바뀌었고,
   동선도 다시 잡아봤어요 👇"
→ [수정된 일정 카드]
```

### 3.4 준비물 플로우
```
유저: "준비물도 알려줘"
바리바리: "도쿄 3박 4일 기준 준비물 리스트예요 🎒"
→ [준비물 체크리스트 카드]
바리바리: "빠진 거 있으면 추가해드릴게요!"
```

## 4. 핵심 기능

### 4.1 채팅 기반 여행 계획
- 카카오톡 스타일 채팅 UI
- 자연어 대화로 여행 정보 수집 (목적지, 기간, 스타일, 예산)
- LLM이 맥락을 유지하며 대화 (이전 대화 참조)
- 타이핑 인디케이터로 생성 중 표시

### 4.2 일정 카드
- 채팅 내 리치 메시지로 일정 표시 (말풍선 안에 카드 형태)
- 일자별 접기/펼치기
- 각 항목: 장소명, 시간, 이동수단, 예상비용
- 대화로 부분 수정 요청 가능

### 4.3 준비물 체크리스트
- 채팅 내 체크리스트 카드로 표시
- 카테고리별 분류 (서류, 의류, 전자기기 등)
- 체크/해제 인터랙션 (카드 내에서 직접)
- 대화로 항목 추가/삭제 가능

### 4.4 파일 첨부 (서류/문서 보관)
- 준비물 중 파일류(여권 사본, 항공권, 호텔 바우처, 보험 증서, 비자 등)를 업로드
- 준비물 항목에 파일 연결 (항목 탭 → 첨부파일 확인)
- 채팅에서도 파일 전송 가능 ("여기 호텔 바우처" + 파일 첨부)
- 이미지(JPG/PNG) + PDF 지원
- 여행 중 오프라인에서도 바로 열람 가능 (v2 모바일: 로컬 캐싱)
- Supabase Storage에 저장, 유저별 격리

### 4.5 여행 관리
- 사이드바에서 여행(채팅방) 목록 관리
- 채팅방 = 여행 1개 (카톡 채팅방처럼)
- 여행 상태: 계획중 / 진행중 / 완료

### 4.6 메시지 타입
| 타입 | 설명 |
|------|------|
| 텍스트 | 일반 대화 메시지 |
| 일정 카드 | 일자별 여행 일정 (접기/펼치기) |
| 준비물 카드 | 카테고리별 체크리스트 |
| 파일 메시지 | 업로드된 파일 (이미지 미리보기 / PDF 아이콘) |
| 시스템 메시지 | "여행이 생성되었습니다" 등 |

## 5. UI/UX 디자인

### 5.1 카카오톡 테마
- **배경**: #B2C7D9 (카톡 채팅방 배경색)
- **내 말풍선**: #FEE500 (카카오 옐로)
- **상대 말풍선**: #FFFFFF (흰색)
- **사이드바**: 채팅 목록 (카톡 채팅 탭처럼)
- **프로필**: 바리바리 캐릭터 아이콘
- **폰트**: 시스템 폰트 (Pretendard 또는 Noto Sans KR)

### 5.2 화면 구성
| 화면 | 설명 |
|------|------|
| **로그인** | 심플 로그인 (이메일 + 소셜) |
| **채팅 목록** | 사이드바 - 여행별 채팅방 리스트 |
| **채팅방** | 메인 화면 - 대화 + 리치 카드 |
| **여행 상세** | 일정/준비물 전체 보기 (채팅 밖에서) |

### 5.3 반응형
- **데스크톱**: 좌측 사이드바(채팅 목록) + 우측 채팅방 (카카오톡 PC 버전)
- **모바일**: 채팅 목록 → 채팅방 (네비게이션 전환)

## 6. 플랫폼

- **v1**: Flutter Web → Vercel 배포
- **v2**: iOS + Android 빌드 (같은 코드베이스)
- 최소 브라우저: Chrome 90+, Safari 15+, Firefox 90+

## 7. LLM 연동

- Vercel Serverless Functions를 통해 LLM 호출
- API: OpenAI GPT-4o 또는 Claude
- **대화 맥락 유지**: 최근 N개 메시지를 LLM에 전달
- **구조화 출력**: 일정/준비물 생성 시 JSON 형식으로 응답 요청
- **일반 대화**: 자유 텍스트 응답
- 프롬프트에 시스템 역할 정의 (여행 플래너 전문가)
- **스트리밍**: 텍스트 응답은 스트리밍으로 실시간 표시 (타이핑 효과)

## 8. 비기능 요구사항

| 항목 | 기준 |
|------|------|
| 일정 생성 응답 시간 | < 15초 (스트리밍으로 체감 시간 단축) |
| 일반 대화 응답 | < 3초 (첫 토큰) |
| 페이지 로드 | < 3초 |
| 동시 접속 | 100명 (v1) |

## 9. MVP 범위 (v1)

**포함:**
- 채팅 UI (카톡 테마)
- 대화형 일정 생성
- 일정 카드 표시
- 대화로 일정 수정
- 준비물 체크리스트 생성
- 여행(채팅방) 목록 관리

**제외 (v2):**
- 회원가입/로그인 (v1은 더미 유저)
- 오프라인 모드 (모바일)
- 지도 표시
- 환율 정보
- 여행 공유/PDF 내보내기
- 푸시 알림

## 10. 경쟁 서비스

| 서비스 | 특징 | 바리바리 차별점 |
|--------|------|----------------|
| TripAdvisor AI | 검색 기반 추천 | 대화형으로 더 자연스러운 UX |
| Wanderlog | 폼 기반 플래너 | 채팅으로 수정이 쉬움 |
| Layla AI | 채팅형 | 카톡 UI로 한국 유저 친숙함, 준비물 포함 |

## 11. 성공 지표

- 일정 생성 후 수정 요청 비율 < 30% (LLM 품질)
- 대화 턴 수: 일정 완성까지 평균 < 5턴
- 준비물 체크 완료율 > 70%
- 재방문율 > 40% (여행 추가 생성)
